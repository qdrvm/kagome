/**
 * Copyright Quadrivium LLC All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */

#include <gtest/gtest.h>

#include "runtime/common/memory_allocator.hpp"
#include "testutil/runtime/memory.hpp"

using kagome::runtime::MemoryAllocator;
using kagome::runtime::MemoryConfig;
using kagome::runtime::TestMemory;

// Replay allocations captured from substrate
TEST(AllocatorTest, Test) {
  TestMemory memory;
  memory.resize(2097152);
  MemoryAllocator allocator{memory, MemoryConfig{1391664}};
  EXPECT_EQ(allocator.allocate(492), 1391672);
  EXPECT_EQ(allocator.allocate(60), 1392192);
  EXPECT_EQ(allocator.allocate(109), 1392264);
  EXPECT_EQ(allocator.allocate(114), 1392400);
  EXPECT_EQ(allocator.allocate(33), 1392536);
  EXPECT_EQ(allocator.allocate(1568), 1392608);
  EXPECT_EQ(allocator.allocate(109), 1394664);
  EXPECT_EQ(allocator.allocate(80), 1394800);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(5), 1394960);
  EXPECT_EQ(allocator.allocate(5), 1394976);
  allocator.deallocate(1394976);
  allocator.deallocate(1394960);
  EXPECT_EQ(allocator.allocate(32), 1394992);
  allocator.deallocate(1394992);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(11), 1394936);
  EXPECT_EQ(allocator.allocate(6), 1394960);
  allocator.deallocate(1394936);
  allocator.deallocate(1394960);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(8), 1394960);
  allocator.deallocate(1394960);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(24), 1394992);
  EXPECT_EQ(allocator.allocate(8), 1394960);
  EXPECT_EQ(allocator.allocate(116), 1395032);
  allocator.deallocate(1394960);
  EXPECT_EQ(allocator.allocate(117), 1395168);
  allocator.deallocate(1394992);
  allocator.deallocate(1395032);
  allocator.deallocate(1395168);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(32), 1394992);
  allocator.deallocate(1394992);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(8), 1394960);
  allocator.deallocate(1394960);
  EXPECT_EQ(allocator.allocate(12), 1394936);
  EXPECT_EQ(allocator.allocate(44), 1395304);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(32), 1394992);
  allocator.deallocate(1394992);
  allocator.deallocate(1395304);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394960);
  allocator.deallocate(1394960);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(120), 1395168);
  EXPECT_EQ(allocator.allocate(20), 1394992);
  EXPECT_EQ(allocator.allocate(109), 1395032);
  allocator.deallocate(1395168);
  allocator.deallocate(1395032);
  allocator.deallocate(1394992);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394960);
  allocator.deallocate(1394960);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(84), 1395032);
  EXPECT_EQ(allocator.allocate(80), 1395168);
  allocator.deallocate(1395032);
  EXPECT_EQ(allocator.allocate(80), 1395032);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394960);
  allocator.deallocate(1394960);
  allocator.deallocate(1395168);
  EXPECT_EQ(allocator.allocate(8), 1394960);
  EXPECT_EQ(allocator.allocate(34), 1395304);
  allocator.deallocate(1394960);
  EXPECT_EQ(allocator.allocate(68), 1395168);
  allocator.deallocate(1395304);
  EXPECT_EQ(allocator.allocate(136), 1395376);
  allocator.deallocate(1395168);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(8), 1394960);
  EXPECT_EQ(allocator.allocate(121), 1395168);
  allocator.deallocate(1394960);
  allocator.deallocate(1395168);
  allocator.deallocate(1395376);
  allocator.deallocate(1395032);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394960);
  allocator.deallocate(1394960);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394960);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  allocator.deallocate(1394960);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(32), 1394992);
  EXPECT_EQ(allocator.allocate(46), 1395304);
  allocator.deallocate(1394936);
  allocator.deallocate(1394992);
  EXPECT_EQ(allocator.allocate(64), 1395640);
  EXPECT_EQ(allocator.allocate(110), 1395032);
  allocator.deallocate(1395304);
  allocator.deallocate(1395640);
  allocator.deallocate(1395032);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(241), 1395376);
  EXPECT_EQ(allocator.allocate(40), 1395640);
  EXPECT_EQ(allocator.allocate(109), 1395032);
  EXPECT_EQ(allocator.allocate(114), 1395168);
  allocator.deallocate(1395376);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(68), 1395712);
  EXPECT_EQ(allocator.allocate(64), 1395304);
  allocator.deallocate(1395712);
  allocator.deallocate(1395304);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(32), 1394992);
  allocator.deallocate(1394992);
  allocator.deallocate(1395032);
  allocator.deallocate(1395168);
  allocator.deallocate(1395640);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(12), 1394936);
  EXPECT_EQ(allocator.allocate(32), 1394992);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(40), 1395640);
  allocator.deallocate(1394992);
  EXPECT_EQ(allocator.allocate(84), 1395168);
  allocator.deallocate(1395640);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  allocator.deallocate(1395168);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(6), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(34), 1395640);
  allocator.deallocate(1395640);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(64), 1395640);
  allocator.deallocate(1395640);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(46), 1395640);
  allocator.deallocate(1395640);
  EXPECT_EQ(allocator.allocate(512), 1395848);
  EXPECT_EQ(allocator.allocate(96), 1395168);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(32), 1394992);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(34), 1395640);
  allocator.deallocate(1395640);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  EXPECT_EQ(allocator.allocate(32), 1396368);
  EXPECT_EQ(allocator.allocate(37), 1395640);
  allocator.deallocate(1394976);
  allocator.deallocate(1396368);
  EXPECT_EQ(allocator.allocate(74), 1395032);
  allocator.deallocate(1395640);
  EXPECT_EQ(allocator.allocate(32), 1396368);
  EXPECT_EQ(allocator.allocate(148), 1395376);
  allocator.deallocate(1395032);
  allocator.deallocate(1396368);
  EXPECT_EQ(allocator.allocate(32), 1396368);
  allocator.deallocate(1396368);
  EXPECT_EQ(allocator.allocate(32), 1396368);
  allocator.deallocate(1396368);
  allocator.deallocate(1395376);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  EXPECT_EQ(allocator.allocate(40), 1395640);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(32), 1396368);
  allocator.deallocate(1396368);
  allocator.deallocate(1395640);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  EXPECT_EQ(allocator.allocate(32), 1396368);
  EXPECT_EQ(allocator.allocate(37), 1395640);
  allocator.deallocate(1394976);
  allocator.deallocate(1396368);
  EXPECT_EQ(allocator.allocate(74), 1395032);
  allocator.deallocate(1395640);
  EXPECT_EQ(allocator.allocate(32), 1396368);
  EXPECT_EQ(allocator.allocate(148), 1395376);
  allocator.deallocate(1395032);
  allocator.deallocate(1396368);
  EXPECT_EQ(allocator.allocate(32), 1396368);
  allocator.deallocate(1396368);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  EXPECT_EQ(allocator.allocate(116), 1395032);
  allocator.deallocate(1394976);
  allocator.deallocate(1395376);
  EXPECT_EQ(allocator.allocate(15), 1394936);
  EXPECT_EQ(allocator.allocate(32), 1396368);
  EXPECT_EQ(allocator.allocate(44), 1395640);
  allocator.deallocate(1394936);
  allocator.deallocate(1396368);
  allocator.deallocate(1395640);
  allocator.deallocate(1395032);
  allocator.deallocate(1395848);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  allocator.deallocate(1394992);
  allocator.deallocate(1395168);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  EXPECT_EQ(allocator.allocate(32), 1394992);
  EXPECT_EQ(allocator.allocate(37), 1395640);
  allocator.deallocate(1394976);
  allocator.deallocate(1394992);
  EXPECT_EQ(allocator.allocate(74), 1395168);
  allocator.deallocate(1395640);
  EXPECT_EQ(allocator.allocate(32), 1394992);
  EXPECT_EQ(allocator.allocate(148), 1395376);
  allocator.deallocate(1395168);
  allocator.deallocate(1394992);
  EXPECT_EQ(allocator.allocate(32), 1394992);
  allocator.deallocate(1394992);
  EXPECT_EQ(allocator.allocate(32), 1394992);
  allocator.deallocate(1394992);
  allocator.deallocate(1395376);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  EXPECT_EQ(allocator.allocate(32), 1394992);
  EXPECT_EQ(allocator.allocate(33), 1395640);
  allocator.deallocate(1394976);
  allocator.deallocate(1394992);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  EXPECT_EQ(allocator.allocate(39), 1395304);
  allocator.deallocate(1394976);
  allocator.deallocate(1395304);
  allocator.deallocate(1395640);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(32), 1394992);
  allocator.deallocate(1394992);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(113), 1395168);
  allocator.deallocate(1395168);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(6), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(6), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(6), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(4), 1394976);
  EXPECT_EQ(allocator.allocate(12), 1394936);
  allocator.deallocate(1394976);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(32), 1394992);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(48), 1395640);
  allocator.deallocate(1394992);
  EXPECT_EQ(allocator.allocate(80), 1395168);
  allocator.deallocate(1395640);
  EXPECT_EQ(allocator.allocate(83), 1395032);
  allocator.deallocate(1395032);
  allocator.deallocate(1395168);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(12), 1394936);
  EXPECT_EQ(allocator.allocate(44), 1395640);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  allocator.deallocate(1395640);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(12), 1394936);
  EXPECT_EQ(allocator.allocate(44), 1395640);
  allocator.deallocate(1394936);
  allocator.deallocate(1395640);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(202), 1395376);
  allocator.deallocate(1395376);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(4), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(202), 1395376);
  allocator.deallocate(1395376);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(32), 1394992);
  EXPECT_EQ(allocator.allocate(32), 1396368);
  EXPECT_EQ(allocator.allocate(34), 1395640);
  EXPECT_EQ(allocator.allocate(32), 1396408);
  allocator.deallocate(1395640);
  allocator.deallocate(1396408);
  allocator.deallocate(1396368);
  allocator.deallocate(1394992);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394976);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  allocator.deallocate(1394976);
  allocator.deallocate(1394664);
  allocator.deallocate(1394800);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(12), 1394936);
  EXPECT_EQ(allocator.allocate(44), 1395640);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(34), 1395304);
  allocator.deallocate(1395304);
  allocator.deallocate(1395640);
  EXPECT_EQ(allocator.allocate(392), 1395848);
  EXPECT_EQ(allocator.allocate(11), 1394936);
  allocator.deallocate(1395848);
  EXPECT_EQ(allocator.allocate(6), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(12), 1396448);
  EXPECT_EQ(allocator.allocate(44), 1395640);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(15), 1396448);
  allocator.deallocate(1396448);
  allocator.deallocate(1395640);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(15), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394976);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  EXPECT_EQ(allocator.allocate(16), 1396472);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(10), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(6), 1394976);
  allocator.deallocate(1394976);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(6), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(7), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394976);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(6), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(392), 1395848);
  EXPECT_EQ(allocator.allocate(32), 1394992);
  allocator.deallocate(1394992);
  EXPECT_EQ(allocator.allocate(32), 1394992);
  allocator.deallocate(1394992);
  EXPECT_EQ(allocator.allocate(32), 1394992);
  allocator.deallocate(1394992);
  EXPECT_EQ(allocator.allocate(106), 1394800);
  allocator.deallocate(1395848);
  EXPECT_EQ(allocator.allocate(6), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(12), 1394936);
  EXPECT_EQ(allocator.allocate(44), 1395640);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(110), 1394664);
  allocator.deallocate(1394664);
  allocator.deallocate(1395640);
  allocator.deallocate(1394800);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(6), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(15), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394976);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(34), 1395640);
  allocator.deallocate(1395640);
  EXPECT_EQ(allocator.allocate(32), 1394992);
  EXPECT_EQ(allocator.allocate(32), 1396368);
  allocator.deallocate(1394992);
  EXPECT_EQ(allocator.allocate(64), 1395640);
  allocator.deallocate(1396368);
  EXPECT_EQ(allocator.allocate(32), 1396368);
  EXPECT_EQ(allocator.allocate(128), 1394800);
  allocator.deallocate(1395640);
  allocator.deallocate(1396368);
  EXPECT_EQ(allocator.allocate(32), 1396368);
  allocator.deallocate(1396368);
  EXPECT_EQ(allocator.allocate(32), 1396368);
  allocator.deallocate(1396368);
  allocator.deallocate(1394800);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(6), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(6), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(202), 1395376);
  allocator.deallocate(1395376);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(6), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(45), 1395640);
  allocator.deallocate(1395640);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(3), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(202), 1395376);
  allocator.deallocate(1395376);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(68), 1394800);
  EXPECT_EQ(allocator.allocate(64), 1395640);
  allocator.deallocate(1394800);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(6), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(34), 1395304);
  allocator.deallocate(1395304);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(6), 1394976);
  allocator.deallocate(1394976);
  allocator.deallocate(1395640);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(6), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(202), 1395376);
  allocator.deallocate(1395376);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(6), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(3), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(28), 1396368);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(32), 1394992);
  EXPECT_EQ(allocator.allocate(32), 1396408);
  EXPECT_EQ(allocator.allocate(34), 1395640);
  EXPECT_EQ(allocator.allocate(32), 1396496);
  allocator.deallocate(1395640);
  allocator.deallocate(1396496);
  allocator.deallocate(1396408);
  allocator.deallocate(1394992);
  allocator.deallocate(1396368);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(202), 1395376);
  allocator.deallocate(1395376);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(7), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(202), 1395376);
  allocator.deallocate(1395376);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(3), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(4), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(3), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(7), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(3), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(202), 1395376);
  allocator.deallocate(1395376);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(16), 1396448);
  allocator.deallocate(1396448);
  EXPECT_EQ(allocator.allocate(4), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(6), 1394976);
  allocator.deallocate(1394976);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(6), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(7), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(6), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394976);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(6), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  allocator.deallocate(1394976);
  allocator.deallocate(1392608);
  EXPECT_EQ(allocator.allocate(6), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(15), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(15), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394976);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(113), 1394800);
  allocator.deallocate(1394800);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(84), 1394800);
  EXPECT_EQ(allocator.allocate(80), 1394664);
  allocator.deallocate(1394800);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(10), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  allocator.deallocate(1394664);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(33), 1395640);
  allocator.deallocate(1395640);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(3), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(15), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(2), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(4), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(1), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(2), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(6), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(34), 1395640);
  allocator.deallocate(1395640);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(280), 1395848);
  EXPECT_EQ(allocator.allocate(60), 1395640);
  EXPECT_EQ(allocator.allocate(109), 1394664);
  EXPECT_EQ(allocator.allocate(114), 1394800);
  EXPECT_EQ(allocator.allocate(33), 1395304);
  allocator.deallocate(1395848);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(6), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(24), 1396368);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(12), 1394936);
  EXPECT_EQ(allocator.allocate(44), 1396536);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(14), 1394936);
  EXPECT_EQ(allocator.allocate(11), 1396448);
  allocator.deallocate(1394936);
  allocator.deallocate(1396536);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(16), 1394936);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(8), 1394976);
  allocator.deallocate(1394976);
  EXPECT_EQ(allocator.allocate(12), 1394936);
  EXPECT_EQ(allocator.allocate(44), 1396536);
  allocator.deallocate(1394936);
  EXPECT_EQ(allocator.allocate(111), 1395168);
  EXPECT_EQ(allocator.allocate(106), 1395032);
  allocator.deallocate(1395168);
  allocator.deallocate(1396536);
  EXPECT_EQ(allocator.allocate(28), 1394992);
  EXPECT_EQ(allocator.allocate(121), 1395168);
  allocator.deallocate(1394992);
  EXPECT_EQ(allocator.allocate(32), 1394992);
  allocator.deallocate(1394992);
  allocator.deallocate(1395168);
  allocator.deallocate(1396448);
  allocator.deallocate(1395032);
  allocator.deallocate(1396368);
  EXPECT_EQ(allocator.allocate(32), 1396368);
  allocator.deallocate(1396368);
  allocator.deallocate(1394664);
  allocator.deallocate(1394800);
  allocator.deallocate(1395304);
  allocator.deallocate(1395640);
  allocator.deallocate(1392264);
  allocator.deallocate(1392400);
  allocator.deallocate(1392536);
  allocator.deallocate(1392192);
}
